<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tinyBlackBox: TinyBlackBox</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tinyBlackBox
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">TinyBlackBox </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A real-time video processing application that implements a multi-threaded system for capturing, displaying, and recording video frames.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
System Architecture</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
System Overview</h2>
<div class="fragment"><div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">|   Input Video    |     |  Frame Buffer    |     |  Output Video    |</div>
<div class="line">|      File        | --&gt; |      Pool        | --&gt; |      File        |</div>
<div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">        ^                        ^                        ^</div>
<div class="line">        |                        |                        |</div>
<div class="line">        v                        v                        v</div>
<div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">|   Capture        |     |   Display        |     |   Record         |</div>
<div class="line">|   Thread         |     |   Thread         |     |   Thread         |</div>
<div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">        |                        |                        |</div>
<div class="line">        +------------------------+------------------------+</div>
<div class="line">                                 |</div>
<div class="line">                                 v</div>
<div class="line">                        +------------------+</div>
<div class="line">                        |   UI Thread      |</div>
<div class="line">                        |   (Control)      |</div>
<div class="line">                        +------------------+</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3"></a>
Thread Model</h2>
<div class="fragment"><div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">|   Capture        |     |   Display        |     |   Record         |</div>
<div class="line">|   Thread         |     |   Thread         |     |   Thread         |</div>
<div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">        |                        |                        |</div>
<div class="line">        |  Reads frames          |  Renders frames        |  Writes frames</div>
<div class="line">        |  at 30 FPS             |  to framebuffer       |  to file</div>
<div class="line">        |                        |                        |</div>
<div class="line">        |  Manages timing        |  Double buffering      |  Handles I/O</div>
<div class="line">        |  (33ms intervals)      |  for display          |  operations</div>
<div class="line">        |                        |                        |</div>
<div class="line">        |  Implements loop       |  UI overlay            |  Frame buffering</div>
<div class="line">        |  playback              |                        |</div>
<div class="line">        |                        |                        |</div>
<div class="line">        v                        v                        v</div>
<div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">|   Frame Pool     |     |   Frame Pool     |     |   Frame Pool     |</div>
<div class="line">|   Management     |     |   Management     |     |   Management     |</div>
<div class="line">+------------------+     +------------------+     +------------------+</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Data Flow</h2>
<div class="fragment"><div class="line">[Source File] → Capture Thread → Frame Pool → Display Thread → [Framebuffer]</div>
<div class="line">                                    ↓</div>
<div class="line">                            Record Thread → [Output File]</div>
<div class="line"> </div>
<div class="line">Detailed Flow:</div>
<div class="line">+-------------+     +-------------+     +-------------+     +-------------+</div>
<div class="line">| Source File | --&gt; |   Capture   | --&gt; | Frame Pool  | --&gt; |   Display   |</div>
<div class="line">| (30 FPS)    |     |   Thread    |     | (Shared)    |     |   Thread    |</div>
<div class="line">+-------------+     +-------------+     +-------------+     +-------------+</div>
<div class="line">                                                              |</div>
<div class="line">                                                              v</div>
<div class="line">                                                          +-------------+</div>
<div class="line">                                                          | Framebuffer |</div>
<div class="line">                                                          +-------------+</div>
<div class="line">                                    |</div>
<div class="line">                                    v</div>
<div class="line">                            +-------------+     +-------------+</div>
<div class="line">                            |   Record    | --&gt; | Output File |</div>
<div class="line">                            |   Thread    |     | (30 FPS)    |</div>
<div class="line">                            +-------------+     +-------------+</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Component Interaction</h2>
<div class="fragment"><div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">|   Frame Pool     |     |   Memory Pool    |     |   Queue System   |</div>
<div class="line">|   Management     |     |   Management     |     |   Management     |</div>
<div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">        |                        |                        |</div>
<div class="line">        |  Thread-safe frame     |  Memory allocation     |  Thread-safe</div>
<div class="line">        |  allocation            |  optimization          |  queues</div>
<div class="line">        |                        |                        |</div>
<div class="line">        |  Frame recycling       |  Memory pooling        |  Synchronization</div>
<div class="line">        |                        |                        |</div>
<div class="line">        |  No data copying       |  Fragmentation         |  Blocking/</div>
<div class="line">        |                        |  reduction             |  non-blocking ops</div>
<div class="line">        |                        |                        |</div>
<div class="line">        v                        v                        v</div>
<div class="line">+------------------+     +------------------+     +------------------+</div>
<div class="line">|   Frame Buffer   |     |   Memory         |     |   Thread         |</div>
<div class="line">|   Operations     |     |   Operations     |     |   Communication  |</div>
<div class="line">+------------------+     +------------------+     +------------------+</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
Project Structure</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
Source Files (&lt;tt&gt;/src&lt;/tt&gt;)</h2>
<ol type="1">
<li><b>Core Video Processing</b><ul>
<li><code><a class="el" href="capture_8c.html">capture.c</a></code> (5.2KB): <a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> capture from source file</li>
<li><code><a class="el" href="display_8c.html">display.c</a></code> (3.0KB): <a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> rendering to framebuffer</li>
<li><code><a class="el" href="record_8c.html">record.c</a></code> (3.9KB): <a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> recording to output file</li>
<li><code><a class="el" href="main_8c.html">main.c</a></code> (2.2KB): Application entry point and thread management</li>
</ul>
</li>
<li><b><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> Management</b><ul>
<li><code><a class="el" href="frame_8c.html">frame.c</a></code> (4.4KB): <a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> data structure and operations</li>
<li><code><a class="el" href="frame__pool_8c.html">frame_pool.c</a></code> (4.4KB): <a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> buffer pool implementation</li>
<li><code><a class="el" href="fbDraw_8c.html">fbDraw.c</a></code> (24KB): Framebuffer drawing operations</li>
<li><code><a class="el" href="memory__pool_8c.html">memory_pool.c</a></code> (3.3KB): Memory allocation and management</li>
</ul>
</li>
<li><b>System Components</b><ul>
<li><code><a class="el" href="queue_8c.html">queue.c</a></code> (1.5KB): Thread-safe queue implementation</li>
<li><code><a class="el" href="task_8c.html">task.c</a></code> (1.6KB): <a class="el" href="structTask.html" title="Structure representing a task to be processed.">Task</a> scheduling and management</li>
<li><code><a class="el" href="ui_8c.html">ui.c</a></code> (3.0KB): User interface handling</li>
<li><code><a class="el" href="log_8c.html">log.c</a></code> (983B): Logging system</li>
<li><code><a class="el" href="util_8c.html">util.c</a></code> (129B): Utility functions</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md8"></a>
Header Files (&lt;tt&gt;/include&lt;/tt&gt;)</h2>
<ol type="1">
<li><b>Core Headers</b><ul>
<li><code><a class="el" href="capture_8h.html">capture.h</a></code> (1.5KB): <a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> capture interface</li>
<li><code><a class="el" href="display_8h.html">display.h</a></code> (923B): Display operations interface</li>
<li><code><a class="el" href="record_8h.html">record.h</a></code> (1.2KB): Recording operations interface</li>
<li><code><a class="el" href="thread__arg_8h.html">thread_arg.h</a></code> (853B): Thread argument structures</li>
</ul>
</li>
<li><b><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> Management Headers</b><ul>
<li><code><a class="el" href="frame_8h.html">frame.h</a></code> (4.9KB): <a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> data structures</li>
<li><code><a class="el" href="frame__pool_8h.html">frame_pool.h</a></code> (4.4KB): <a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> pool interface</li>
<li><code><a class="el" href="fbDraw_8h.html">fbDraw.h</a></code> (9.7KB): Framebuffer drawing interface</li>
<li><code><a class="el" href="memory__pool_8h.html">memory_pool.h</a></code> (3.9KB): Memory pool interface</li>
</ul>
</li>
<li><b>System Headers</b><ul>
<li><code><a class="el" href="queue_8h.html">queue.h</a></code> (2.2KB): <a class="el" href="structQueue.html" title="Thread-safe fixed-capacity FIFO queue.">Queue</a> data structure interface</li>
<li><code><a class="el" href="task_8h.html">task.h</a></code> (3.2KB): <a class="el" href="structTask.html" title="Structure representing a task to be processed.">Task</a> management interface</li>
<li><code><a class="el" href="ui_8h.html">ui.h</a></code> (1.6KB): UI interface</li>
<li><code><a class="el" href="log_8h.html">log.h</a></code> (1.5KB): Logging interface</li>
<li><code><a class="el" href="util_8h.html">util.h</a></code> (159B): Utility functions interface</li>
<li><code><a class="el" href="console__color_8h.html">console_color.h</a></code> (265B): Console color definitions</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md9"></a>
Technical Details</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
Video Format</h2>
<ol type="1">
<li><b>File Structure</b><ul>
<li>Header: Two integers (width, height)</li>
<li><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> data: width * height bytes per frame</li>
<li>Grayscale format (1 byte per pixel)</li>
<li>30 FPS frame rate</li>
</ul>
</li>
<li><b><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> Processing</b><ul>
<li><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> size: width * height bytes</li>
<li><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> timing: 33ms per frame</li>
<li>Continuous playback with loop</li>
<li>Pointer-based frame transfer</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md11"></a>
Build System</h2>
<ol type="1">
<li><b>Compiler Settings</b><ul>
<li>GCC compiler</li>
<li>Wall and Wextra warnings enabled</li>
<li>Debug support (-g -O0)</li>
<li>pthread library linked</li>
</ul>
</li>
<li><b>Directory Structure</b><ul>
<li><code>/src</code>: Source files</li>
<li><code>/include</code>: Header files</li>
<li><code>/bin</code>: Executable output</li>
<li><code>/test</code>: Test files</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md12"></a>
Key Features</h2>
<ol type="1">
<li><b>Performance Optimization</b><ul>
<li>Pointer-based frame transfer</li>
<li><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> pool implementation</li>
<li>Memory pooling</li>
<li>Thread-safe operations</li>
</ul>
</li>
<li><b>Control Operations</b><ul>
<li>Start/Stop/Restart functionality</li>
<li>Real-time frame processing</li>
<li>Continuous playback</li>
<li>Thread synchronization</li>
</ul>
</li>
<li><b>Error Handling</b><ul>
<li>Comprehensive logging system</li>
<li>Error recovery mechanisms</li>
<li>Resource cleanup</li>
<li>Thread safety checks</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md13"></a>
Development Tools</h1>
<ol type="1">
<li><b>Build Tools</b><ul>
<li>Make build system</li>
<li>GCC compiler</li>
<li>Debug support</li>
<li>Test framework</li>
</ul>
</li>
<li><b>Libraries</b><ul>
<li>POSIX Threads (pthread)</li>
<li>Standard C Library</li>
<li>Check testing framework</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md14"></a>
What I Learned</h1>
<ol type="1">
<li><b>Thread Programming</b><ul>
<li>POSIX thread management</li>
<li>Thread synchronization</li>
<li>Inter-thread communication</li>
<li>Resource management</li>
</ul>
</li>
<li><b>Memory Management</b><ul>
<li>Memory pooling</li>
<li><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> buffer management</li>
<li>Resource optimization</li>
<li>Memory safety</li>
</ul>
</li>
<li><b>Video Processing</b><ul>
<li><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> buffer operations</li>
<li>Real-time processing</li>
<li>File I/O optimization</li>
<li>Display synchronization</li>
</ul>
</li>
<li><b>System Design</b><ul>
<li>Component architecture</li>
<li>Thread safety</li>
<li>Resource management</li>
<li>Error handling</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md15"></a>
Building and Running</h1>
<h2><a class="anchor" id="autotoc_md16"></a>
Prerequisites</h2>
<ul>
<li>GCC compiler</li>
<li>Make build system</li>
<li>POSIX Threads library</li>
<li>Check testing framework (for running tests)</li>
</ul>
<h2><a class="anchor" id="autotoc_md17"></a>
Building the Project</h2>
<ol type="1">
<li><p class="startli"><b>Standard Build</b> </p><div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p class="startli">This will create the executable in the <code>bin</code> directory.</p>
</li>
<li><p class="startli"><b>Debug Build</b> </p><div class="fragment"><div class="line">make debug</div>
</div><!-- fragment --><p class="startli">Creates a debug version with additional debugging information.</p>
</li>
<li><p class="startli"><b>Clean Build</b> </p><div class="fragment"><div class="line">make clean</div>
</div><!-- fragment --><p class="startli">Removes all built files from the <code>bin</code> directory.</p>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md18"></a>
Running Tests</h2>
<div class="fragment"><div class="line">make test</div>
</div><!-- fragment --><p>This will compile and run the frame module tests.</p>
<h1><a class="anchor" id="autotoc_md19"></a>
Command Guide</h1>
<h2><a class="anchor" id="autotoc_md20"></a>
Program Controls</h2>
<ol type="1">
<li><b>Start Processing</b><ul>
<li>Starts video capture, display, and recording</li>
<li>Initializes all threads and resources</li>
<li>Begins frame processing at 30 FPS</li>
</ul>
</li>
<li><b>Stop Processing</b><ul>
<li>Pauses all video processing</li>
<li>Maintains current state</li>
<li>Preserves resources for restart</li>
</ul>
</li>
<li><b>Restart Processing</b><ul>
<li>Resumes from the beginning</li>
<li>Reinitializes frame capture</li>
<li>Maintains display and recording settings</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md21"></a>
File Operations</h2>
<ol type="1">
<li><b>Input File Format</b><ul>
<li>Binary file containing video data</li>
<li>Header: Two integers (width, height)</li>
<li><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> data: width * height bytes per frame</li>
<li>Grayscale format (1 byte per pixel)</li>
</ul>
</li>
<li><b>Output File Format</b><ul>
<li>Same format as input</li>
<li>Created in the specified output directory</li>
<li>Maintains original frame rate</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md22"></a>
Performance Options</h2>
<ol type="1">
<li><b><a class="el" href="structFrame.html" title="Represents a pixel frame with metadata and data buffer.">Frame</a> Pool Size</b><ul>
<li>Configurable number of frame buffers</li>
<li>Affects memory usage and performance</li>
<li>Default: Optimized for 30 FPS processing</li>
</ul>
</li>
<li><b>Memory Management</b><ul>
<li>Pre-allocated memory pools</li>
<li>Configurable pool sizes</li>
<li>Optimized for continuous operation</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md23"></a>
Logging</h2>
<ol type="1">
<li><b>Log Levels</b><ul>
<li>ERROR: Critical system errors</li>
<li>WARNING: Non-critical issues</li>
<li>INFO: General operation information</li>
<li>DEBUG: Detailed debugging information</li>
</ul>
</li>
<li><b>Log Output</b><ul>
<li>Console output with color coding</li>
<li>Timestamp for each log entry</li>
<li>Thread identification</li>
<li>Operation context </li>
</ul>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
